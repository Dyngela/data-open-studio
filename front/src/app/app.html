<p-toast />
@if (isAuthenticated()) {
  <div class="min-h-screen bg-gray-50">
    <nav class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <div class="flex-shrink-0 flex items-center gap-3">
              <i class="pi pi-database text-2xl text-indigo-600"></i>
              <span class="text-xl font-semibold text-gray-900">Data Open Studio</span>
            </div>

            <div class="hidden md:ml-10 md:flex md:space-x-1">
              <a routerLink="/playground" routerLinkActive="bg-indigo-50 text-indigo-700"
                 class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors">
                <i class="pi pi-th-large mr-2"></i>Playground
              </a>
              <a routerLink="/triggers" routerLinkActive="bg-indigo-50 text-indigo-700"
                 class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors">
                <i class="pi pi-link mr-2"></i>Déclencheurs
              </a>
              <a routerLink="/jobs" routerLinkActive="bg-indigo-50 text-indigo-700"
                 class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors">
                <i class="pi pi-play-circle mr-2"></i>Jobs
              </a>
              <a routerLink="/settings" routerLinkActive="bg-indigo-50 text-indigo-700"
                 class="px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors">
                <i class="pi pi-cog mr-2"></i>Settings
              </a>
            </div>
          </div>

          <div class="flex items-center gap-4">
            <button class="p-2 rounded-full text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-colors relative">
              <i class="pi pi-bell text-lg"></i>
              <span class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
            </button>

            <div class="flex items-center gap-3 pl-4 border-l border-gray-200">
              <div class="w-9 h-9 rounded-full bg-indigo-600 flex items-center justify-center">
                <span class="text-white text-sm font-medium">{{ userInitials() }}</span>
              </div>
              @if (currentUser(); as user) {
                <span class="text-sm text-gray-700 hidden lg:block">{{ user.prenom }}</span>
              }
              <button
                (click)="logout()"
                class="p-2 rounded-lg text-gray-500 hover:text-red-600 hover:bg-red-50 transition-colors"
                title="Déconnexion"
              >
                <i class="pi pi-sign-out"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <main>
      <router-outlet></router-outlet>
    </main>
  </div>
} @else {
  <router-outlet></router-outlet>
}
