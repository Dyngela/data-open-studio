<p-fileupload
  [multiple]="multiple()"
  [accept]="accept()"
  [maxFileSize]="maxFileSize()"
  [disabled]="disabled()"
  [showUploadButton]="false"
  [showCancelButton]="showCancelButton()"
  [chooseLabel]="chooseLabel()"
  [uploadLabel]="uploadLabel()"
  [cancelLabel]="cancelLabel()"
  [invalidFileSizeMessageSummary]="'Fichier invalide'"
  [invalidFileSizeMessageDetail]="invalidFileSizeMessage()"
  [class]="customClass()"
  (onSelect)="handleSelect($event)"
  (onRemove)="handleRemove($event)"
  (onClear)="handleClear()"
  (onUpload)="handleUpload($event)"
  (uploadHandler)="handleCustomUpload($event)"
  (onError)="handleError($event)"
>
  <ng-template pTemplate="content" let-files let-uploadedFiles="uploadedFiles" let-removeFileCallback="removeFileCallback" let-removeUploadedFileCallback="removeUploadedFileCallback">
    <div class="flex flex-col gap-4 pt-4">
      @if (files.length > 0) {
        <div class="flex flex-col gap-2">
          <h5 class="m-0 text-lg font-semibold">Fichiers en attente</h5>
          @for (file of files; track file.name) {
            <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
              <div class="flex items-center gap-3">
                <i class="pi pi-file text-2xl"></i>
                <div class="flex flex-col">
                  <span class="font-medium">{{ file.name }}</span>
                  <span class="text-sm text-gray-500">{{ formatSize(file.size) }}</span>
                </div>
              </div>
              <button
                type="button"
                class="p-2 rounded-full hover:bg-red-100 transition-colors"
                (click)="removeFileCallback(file)"
              >
                <i class="pi pi-times text-red-600"></i>
              </button>
            </div>
          }
        </div>
      }
      @if (uploadedFiles.length > 0) {
        <div class="flex flex-col gap-2">
          <h5 class="m-0 text-lg font-semibold">Fichiers téléchargés</h5>
          @for (file of uploadedFiles; track file.name) {
            <div class="flex items-center justify-between p-3 border border-green-200 bg-green-50 rounded-lg">
              <div class="flex items-center gap-3">
                <i class="pi pi-check-circle text-2xl text-green-600"></i>
                <div class="flex flex-col">
                  <span class="font-medium">{{ file.name }}</span>
                  <span class="text-sm text-gray-500">{{ formatSize(file.size) }}</span>
                </div>
              </div>
              <button
                type="button"
                class="w-12 h-12 flex items-center justify-center rounded-full bg-red-300"
                (click)="removeUploadedFileCallback(file)"
              >
                <i class="pi pi-times"></i>
              </button>
            </div>
          }
        </div>
      }
      @if (files.length === 0 && uploadedFiles.length === 0) {
        <div class="flex flex-col items-center justify-center py-8 text-gray-400">
          <i class="pi pi-cloud-upload text-6xl mb-3"></i>
          <p class="m-0 text-lg">{{ emptyMessage() }}</p>
        </div>
      }
    </div>


  </ng-template>
</p-fileupload>
